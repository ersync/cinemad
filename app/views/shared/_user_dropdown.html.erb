<li class="relative group shrink-0">
  <button class="flex items-center gap-2 p-2 rounded-full hover:bg-white/10 transition-colors">
    <% if current_user.avatar_url.present? %>
      <%= image_tag current_user.avatar_url,
        class: "w-8 h-8 rounded-full object-cover shadow-lg ring-2 ring-white/30",
        alt: "#{current_user.username}'s avatar" %>
    <% else %>
      <%= render "shared/header/avatar_placeholder", username: current_user.username %>
  <% end %>
  </button>

  <div class="invisible opacity-0 group-hover:visible group-hover:opacity-100 absolute right-0 w-[280px] transition-all duration-200">
    <div class="bg-white rounded-xl shadow-xl border border-gray-100 overflow-hidden">
      <%= render 'shared/user_dropdown_header' %>
      <%= render 'shared/user_dropdown_content' %>
      <%= render 'shared/user_dropdown_settings' %>
    </div>
  </div>
</li>